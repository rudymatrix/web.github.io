<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>é¡¹ç›®æ•´åˆç®¡ç†é—¯å…³æŒ‘æˆ˜</title>
    <style>
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --success: #A8E6CF;
            --error: #FF9F43;
            --bg: #F9F7F7;
        }

        body {
            font-family: 'Comic Sans MS', cursive;
            background: var(--bg);
            color: #2D3436;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            position: relative;
            overflow-y: auto;
            max-height: 90vh;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            position: sticky;
            top: 0;
            background: white;
            z-index: 1;
            padding: 10px 0;
        }

        .score-board {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 12px 25px;
            border-radius: 50px;
            color: white;
            font-size: 1.2em;
        }

        .question-card {
            background: #FFF;
            border: 3px solid var(--secondary);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
            transition: transform 0.3s;
            min-height: 200px;
        }

        .q-type {
            position: absolute;
            top: -15px;
            left: 20px;
            background: var(--primary);
            color: white;
            padding: 8px 20px;
            border-radius: 15px;
            font-size: 0.9em;
        }

        .options {
            display: grid;
            gap: 15px;
            margin: 25px 0;
        }

        .option {
            padding: 15px;
            border: 2px solid #DFE6E9;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            background: #F9F9F9;
        }

        .correct {
            background: var(--success) !important;
            border-color: #7BC67E !important;
            animation: bounce 0.5s;
        }

        .wrong {
            background: var(--error) !important;
            border-color: #FF8B4D !important;
            animation: shake 0.5s;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
            position: sticky;
            bottom: 0;
            background: white;
            padding: 15px 0;
        }

        button {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .progress-container {
            height: 15px;
            background: #EDF2F7;
            border-radius: 10px;
            overflow: hidden;
            margin: 25px 0;
            position: sticky;
            top: 70px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0;
            transition: width 0.6s ease;
        }

        .stars {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .answer-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            background: #f0f4ff;
            animation: fadeIn 0.5s;
        }

        .explanation {
            color: #666;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .fill-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--secondary);
            border-radius: 8px;
            margin-top: 15px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .wrong-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
            max-height: 80vh;
            overflow-y: auto;
            width: 90%;
            max-width: 600px;
        }

        .wrong-item {
            padding: 15px;
            margin: 10px 0;
            background: #fff3f3;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="score-board">
                ğŸ† å¾—åˆ†ï¼š<span id="score">0</span>/<span id="total">0</span>
            </div>
            <div class="stars">
                â­<span id="starCount">0</span>
            </div>
        </div>

        <div class="progress-container">
            <div class="progress-bar"></div>
        </div>

        <div id="questionArea"></div>
        
        <div class="controls">
            <button id="nextBtn" onclick="nextQuestion()" style="background: var(--secondary); color: white;">
                â¡ï¸ ä¸‹ä¸€é¢˜
            </button>
            <button onclick="showAnswer()" style="background: var(--primary); color: white;">
                ğŸ” æ˜¾ç¤ºç­”æ¡ˆ
            </button>
            <button onclick="showWrongBook()" style="background: #6C5CE7; color: white;">
                ğŸ“– é”™é¢˜æœ¬
            </button>
            <button onclick="restartGame()" class="restart-btn">
                ğŸ”„ é‡æ–°å¼€å§‹
            </button>
        </div>
    </div>

    <script>
        // å®Œæ•´é¢˜åº“æ•°æ®
        const questions = [
    {
      "type": "choice",
      "question": "é¡¹ç›®æ•´åˆç®¡ç†çš„ç›®æ ‡ä¸åŒ…æ‹¬ä»¥ä¸‹å“ªé¡¹ï¼Ÿ",
      "options": ["èµ„æºåˆ†é…", "å¹³è¡¡ç«äº‰æ€§éœ€æ±‚", "å®Œå…¨æ¶ˆé™¤é£é™©", "ç®¡ç†çŸ¥è¯†é¢†åŸŸä¾èµ–å…³ç³»"],
      "answer": "C",
      "ref": "ç®¡ç†åŸºç¡€ä¸€æ‰§è¡Œæ•´åˆ",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "fill",
      "question": "é¡¹ç›®ç»ç†åœ¨æ•´åˆç®¡ç†ä¸­çš„åŒé‡è§’è‰²åŒ…æ‹¬ç»„ç»‡å±‚é¢çš„æˆ˜ç•¥å¯¹é½å’Œé¡¹ç›®å±‚é¢çš„______ã€‚",
      "answer": "æŒ‡å¯¼å›¢é˜ŸååŒå·¥ä½œ",
      "ref": "ç®¡ç†åŸºç¡€ä¸€æ‰§è¡Œæ•´åˆ",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "ä»¥ä¸‹å“ªé¡¹æ˜¯æ•´åˆå¤æ‚æ€§çš„å…¸å‹è¡¨ç°ï¼Ÿ",
      "options": ["çº¿æ€§å› æœå…³ç³»", "éƒ¨åˆ†ç®€å•ç›¸åŠ ", "çªå‘æ€§è¡Œä¸º", "é™æ€ç»“æ„"],
      "answer": "C",
      "ref": "ç®¡ç†åŸºç¡€ä¸€æ•´åˆçš„å¤æ‚æ€§",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "qa",
      "question": "åˆ—ä¸¾ä¸‰ç§é¡¹ç›®ç®¡ç†æ–°å®è·µä¸­æåˆ°çš„å·¥å…·ç±»å‹ã€‚",
      "answer": "ä¿¡æ¯åŒ–å·¥å…·ã€å¯è§†åŒ–ç®¡ç†å·¥å…·ã€çŸ¥è¯†ç®¡ç†ç³»ç»Ÿ",
      "ref": "ç®¡ç†åŸºç¡€ä¸€ç®¡ç†æ–°å®è·µ",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "é¡¹ç›®ç« ç¨‹çš„æ‰¹å‡†æ ‡å¿—ç€é¡¹ç›®çš„ä»€ä¹ˆé˜¶æ®µï¼Ÿ",
      "options": ["è§„åˆ’å¯åŠ¨", "æ­£å¼å¯åŠ¨", "æ‰§è¡Œå¼€å§‹", "æ”¶å°¾å®Œæˆ"],
      "answer": "B",
      "ref": "åˆ¶å®šé¡¹ç›®ç« ç¨‹-æ¦‚è¿°",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "fill",
      "question": "é¡¹ç›®å¯åŠ¨æ—¶ï¼Œé¢„å…ˆæ‰¹å‡†çš„è´¢åŠ¡èµ„æºåº”è®°å½•åœ¨______æ–‡ä»¶ä¸­ã€‚",
      "answer": "é¡¹ç›®ç« ç¨‹",
      "ref": "åˆ¶å®šé¡¹ç›®ç« ç¨‹è¾“å‡º",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "ä¸‹åˆ—å“ªé¡¹ä¸å±äºå˜æ›´è¯·æ±‚çš„ç±»å‹ï¼Ÿ",
      "options": ["é¢„é˜²æªæ–½", "ç¼ºé™·è¡¥æ•‘", "èŒƒå›´è”“å»¶", "æ›´æ–°"],
      "answer": "C",
      "ref": "æŒ‡å¯¼ä¸ç®¡ç†é¡¹ç›®å·¥ä½œè¾“å‡º",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "qa",
      "question": "ç®€è¿°æ˜¾æ€§çŸ¥è¯†ä¸éšæ€§çŸ¥è¯†çš„ä¸»è¦åŒºåˆ«ã€‚",
      "answer": "æ˜¾æ€§çŸ¥è¯†å¯ç¼–ç ä¼ æ’­ï¼ˆå¦‚æ–‡æ¡£ï¼‰ï¼Œéšæ€§çŸ¥è¯†éš¾ä»¥æ˜ç¡®è¡¨è¾¾ï¼ˆå¦‚ç»éªŒï¼‰",
      "ref": "ç®¡ç†é¡¹ç›®çŸ¥è¯†â€”æ¦‚è¿°",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "å·¥ä½œç»©æ•ˆæ•°æ®è½¬åŒ–ä¸ºå·¥ä½œç»©æ•ˆä¿¡æ¯çš„è¿‡ç¨‹å‘ç”Ÿåœ¨å“ªä¸ªé˜¶æ®µï¼Ÿ",
      "options": ["ç›‘æ§è¿‡ç¨‹", "æ‰§è¡Œè¿‡ç¨‹", "è§„åˆ’è¿‡ç¨‹", "æ”¶å°¾è¿‡ç¨‹"],
      "answer": "A",
      "ref": "ç›‘æ§é¡¹ç›®å·¥ä½œâ€”è¾“å…¥",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "fill",
      "question": "é¡¹ç›®çŸ¥è¯†ç®¡ç†çš„æ ¸å¿ƒç›®çš„æ˜¯å®ç°______å¹¶æ”¯æŒç»„ç»‡å­¦ä¹ ã€‚",
      "answer": "é¡¹ç›®ç›®æ ‡",
      "ref": "ç®¡ç†é¡¹ç›®çŸ¥è¯†",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "ä¸‹åˆ—å“ªé¡¹æ˜¯é…ç½®ç®¡ç†ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½ï¼Ÿ",
      "options": ["ç¼–åˆ¶è¿›åº¦è®¡åˆ’", "ç‰ˆæœ¬æ§åˆ¶", "æˆæœ¬ä¼°ç®—", "é£é™©åˆ†æ"],
      "answer": "B",
      "ref": "æŒ‡å¯¼ä¸ç®¡ç†é¡¹ç›®å·¥ä½œâ€”å·¥å…·ä¸æŠ€æœ¯",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "qa",
      "question": "é¡¹ç›®ç®¡ç†è®¡åˆ’åŸºå‡†åŒ–åï¼Œä¸ºä½•éœ€è¦å˜æ›´æ§åˆ¶æµç¨‹ï¼Ÿ",
      "answer": "ç¡®ä¿å¯¹åŸºå‡†çš„ä»»ä½•ä¿®æ”¹å‡ç»è¿‡æ­£å¼è¯„å®¡ï¼Œç»´æŒé¡¹ç›®å¯æ§æ€§",
      "ref": "åˆ¶è®¢é¡¹ç›®ç®¡ç†è®¡åˆ’",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "æ··åˆå‹æ–¹æ³•åœ¨æ•´åˆç®¡ç†ä¸­çš„å…¸å‹åº”ç”¨æ˜¯ï¼Ÿ",
      "options": ["ä»…ç”¨é¢„æµ‹æ³•", "ç»“åˆæ•æ·ä¸ç€‘å¸ƒ", "å–æ¶ˆå˜æ›´æ§åˆ¶", "å‡å°‘å¹²ç³»äººå‚ä¸"],
      "answer": "B",
      "ref": "ç®¡ç†åŸºç¡€ä¸€ç®¡ç†æ–°å®è·µ",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "fill",
      "question": "______ç”¨äºè·Ÿè¸ªæ‰€æœ‰æœªè§£å†³é—®é¢˜åŠå…¶çŠ¶æ€ï¼Œé¦–æ¬¡åˆ›å»ºäºæŒ‡å¯¼ä¸ç®¡ç†é¡¹ç›®å·¥ä½œè¿‡ç¨‹ã€‚",
      "answer": "é—®é¢˜æ—¥å¿—",
      "ref": "æŒ‡å¯¼ä¸ç®¡ç†é¡¹ç›®å·¥ä½œâ€”è¾“å‡º",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "é¡¹ç›®é€€å‡ºæ ‡å‡†åº”åœ¨å“ªä¸ªæ–‡ä»¶ä¸­æ˜ç¡®ï¼Ÿ",
      "options": ["éœ€æ±‚æ–‡æ¡£", "é¡¹ç›®ç« ç¨‹", "é£é™©ç®¡ç†è®¡åˆ’", "æ²Ÿé€šè®¡åˆ’"],
      "answer": "B",
      "ref": "åˆ¶å®šé¡¹ç›®ç« ç¨‹è¾“å‡º",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "qa",
      "question": "åˆ—ä¸¾ä¸‰ç§æ•°æ®æ”¶é›†æŠ€æœ¯åŠå…¶åœ¨åˆ¶å®šé¡¹ç›®ç« ç¨‹ä¸­çš„åº”ç”¨åœºæ™¯ã€‚",
      "answer": "å¤´è„‘é£æš´ï¼ˆåˆ›æ„ç”Ÿæˆï¼‰ã€ç„¦ç‚¹å°ç»„ï¼ˆäº’åŠ¨è®¨è®ºï¼‰ã€è®¿è°ˆï¼ˆè·å–é«˜å±‚éœ€æ±‚ï¼‰",
      "ref": "åˆ¶å®šé¡¹ç›®ç« ç¨‹å·¥å…·ä¸æŠ€æœ¯",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "ç»éªŒæ•™è®­ç™»è®°å†Œæœ€ç»ˆåº”å½’å…¥ä½•å¤„ï¼Ÿ",
      "options": ["é¡¹ç›®æ¡£æ¡ˆ", "ç»„ç»‡è¿‡ç¨‹èµ„äº§", "ä¸ªäººç¬”è®°", "åºŸå¼ƒæ–‡ä»¶"],
      "answer": "B",
      "ref": "ç®¡ç†é¡¹ç›®çŸ¥è¯†â€”è¾“å‡º",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "fill",
      "question": "______åˆ†æç”¨äºç¡®å®šåå·®çš„æ ¹æœ¬åŸå› ï¼Œå¸®åŠ©åˆ¶å®šé’ˆå¯¹æ€§çº æ­£æªæ–½ã€‚",
      "answer": "æ ¹æœ¬åŸå› ",
      "ref": "ç›‘æ§é¡¹ç›®å·¥ä½œâ€”å·¥å…·ä¸æŠ€æœ¯",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "ä¸‹åˆ—å“ªé¡¹æ˜¯å¯è§†åŒ–ç®¡ç†å·¥å…·çš„ä¸»è¦ä½œç”¨ï¼Ÿ",
      "options": ["æ›¿ä»£æ²Ÿé€š", "éšè—é¡¹ç›®çŠ¶æ€", "ç›´è§‚å±•ç¤ºå…³é”®è¦ç´ ", "å¢åŠ æ–‡æ¡£å¤æ‚åº¦"],
      "answer": "C",
      "ref": "ç®¡ç†åŸºç¡€ä¸€ç®¡ç†æ–°å®è·µ",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "qa",
      "question": "æè¿°é¡¹ç›®ç®¡ç†è®¡åˆ’ä¸é¡¹ç›®æ–‡ä»¶çš„æ ¸å¿ƒåŒºåˆ«ã€‚",
      "answer": "è®¡åˆ’æ˜¯æ­£å¼åŸºå‡†æ–‡ä»¶ï¼ˆå¦‚èŒƒå›´åŸºå‡†ï¼‰ï¼Œæ–‡ä»¶æ˜¯è¾…åŠ©ä¿¡æ¯ï¼ˆå¦‚é—®é¢˜æ—¥å¿—ï¼‰",
      "ref": "ç®¡ç†åŸºç¡€ä¸€é¡¹ç›®ç®¡ç†è®¡åˆ’å’Œé¡¹ç›®æ–‡ä»¶",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "å®æ–½æ•´ä½“å˜æ›´æ§åˆ¶çš„æœ€ç»ˆå†³ç­–æƒå±äºï¼Ÿ",
      "options": ["é¡¹ç›®ç»ç†", "é¡¹ç›®å›¢é˜Ÿ", "å˜æ›´æ§åˆ¶å§”å‘˜ä¼š", "å®¢æˆ·ä»£è¡¨"],
      "answer": "C",
      "ref": "å®æ–½æ•´ä½“å˜æ›´æ§åˆ¶-æ¦‚è¿°",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "fill",
      "question": "______ä¼šè®®ç”¨äºåˆ¶å®šç« ç¨‹æ—¶ä¿ƒæˆå¹²ç³»äººå…±è¯†ï¼Œéœ€å¼•å¯¼è€…ä¸»æŒã€‚",
      "answer": "ç„¦ç‚¹å°ç»„",
      "ref": "åˆ¶å®šé¡¹ç›®ç« ç¨‹å·¥å…·ä¸æŠ€æœ¯",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "é¡¹ç›®ç”Ÿå‘½å‘¨æœŸæè¿°å±äºé¡¹ç›®ç®¡ç†è®¡åˆ’çš„å“ªä¸ªéƒ¨åˆ†ï¼Ÿ",
      "options": ["å­ç®¡ç†è®¡åˆ’", "åŸºå‡†", "å…¶ä»–ç»„ä»¶", "é¡¹ç›®æ–‡ä»¶"],
      "answer": "C",
      "ref": "åˆ¶è®¢é¡¹ç›®ç®¡ç†è®¡åˆ’â€”è¾“å‡º",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "qa",
      "question": "è§£é‡Šé…ç½®ç®¡ç†ç³»ç»Ÿåœ¨æŒ‡å¯¼é¡¹ç›®å·¥ä½œä¸­çš„å…·ä½“ä½œç”¨ã€‚",
      "answer": "ç®¡ç†å¯äº¤ä»˜æˆæœç‰ˆæœ¬ï¼Œç¡®ä¿å˜æ›´å—æ§ä¸”å¯è¿½æº¯",
      "ref": "æŒ‡å¯¼ä¸ç®¡ç†é¡¹ç›®å·¥ä½œâ€”å·¥å…·ä¸æŠ€æœ¯",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "ä¸‹åˆ—å“ªé¡¹ä¸æ˜¯åˆ¶å®šé¡¹ç›®ç« ç¨‹çš„è¾“å…¥ï¼Ÿ",
      "options": ["åè®®", "äº‹ä¸šç¯å¢ƒå› ç´ ", "é£é™©ç®¡ç†è®¡åˆ’", "ç«‹é¡¹ç®¡ç†æ–‡ä»¶"],
      "answer": "C",
      "ref": "åˆ¶å®šé¡¹ç›®ç« ç¨‹ä¸€è¾“å…¥",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "fill",
      "question": "______æŠ€æœ¯é€šè¿‡å†å²æ•°æ®é¢„æµ‹æœªæ¥ç»©æ•ˆï¼Œå¸¸ç”¨äºç›‘æ§è¿›åº¦åå·®ã€‚",
      "answer": "è¶‹åŠ¿åˆ†æ",
      "ref": "ç›‘æ§é¡¹ç›®å·¥ä½œâ€”å·¥å…·ä¸æŠ€æœ¯",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "é¡¹ç›®æ•ˆç›Šç®¡ç†å±äºé¡¹ç›®ç»ç†åœ¨å“ªä¸ªå±‚é¢çš„èŒè´£ï¼Ÿ",
      "options": ["é¡¹ç›®æ‰§è¡Œå±‚é¢", "ç»„ç»‡æˆ˜ç•¥å±‚é¢", "å›¢é˜Ÿæ“ä½œå±‚é¢", "å®¢æˆ·æ²Ÿé€šå±‚é¢"],
      "answer": "B",
      "ref": "ç®¡ç†åŸºç¡€ä¸€ç®¡ç†æ–°å®è·µ",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "qa",
      "question": "è¯´æ˜å˜æ›´æ—¥å¿—åœ¨æ•´ä½“å˜æ›´æ§åˆ¶ä¸­çš„ç”¨é€”ã€‚",
      "answer": "è®°å½•æ‰€æœ‰å˜æ›´è¯·æ±‚çš„çŠ¶æ€ã€å®¡æ‰¹åŠå®æ–½ç»“æœï¼Œä¾¿äºè·Ÿè¸ªå®¡è®¡",
      "ref": "å®æ–½æ•´ä½“å˜æ›´æ§åˆ¶",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "ç»“æŸé¡¹ç›®æ—¶ï¼Œç»éªŒæ•™è®­æ€»ç»“ä¸»è¦è¾“å‡ºåˆ°ï¼Ÿ",
      "options": ["é¡¹ç›®ç« ç¨‹", "ç»„ç»‡è¿‡ç¨‹èµ„äº§", "å·¥ä½œç»©æ•ˆæŠ¥å‘Š", "é£é™©ç™»è®°å†Œ"],
      "answer": "B",
      "ref": "ç®¡ç†é¡¹ç›®çŸ¥è¯†â€”è¾“å‡º",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "fill",
      "question": "______è®¡åˆ’å®šä¹‰äº†å¦‚ä½•å¯¹é¡¹ç›®å˜æ›´è¿›è¡Œæ­£å¼å®¡æŸ¥å’Œæ‰¹å‡†ã€‚",
      "answer": "å˜æ›´ç®¡ç†",
      "ref": "åˆ¶è®¢é¡¹ç›®ç®¡ç†è®¡åˆ’â€”è¾“å‡º",
      "page": "ç¬¬å…«ç« "
    },
    {
      "type": "choice",
      "question": "ä¸‹åˆ—å“ªé¡¹æ˜¯ç„¦ç‚¹å°ç»„ä¸è®¿è°ˆçš„ä¸»è¦åŒºåˆ«ï¼Ÿ",
      "options": ["å‚ä¸äººæ•°", "æ–‡æ¡£è®°å½•", "ä½¿ç”¨å·¥å…·", "æ•°æ®åˆ†ææ–¹æ³•"],
      "answer": "A",
      "ref": "åˆ¶å®šé¡¹ç›®ç« ç¨‹å·¥å…·ä¸æŠ€æœ¯",
      "page": "ç¬¬å…«ç« "
    }
    // æ›´å¤šé¢˜ç›®...
        ].sort(() => Math.random() - 0.5); // åˆå§‹éšæœºæ’åº;

        // æ¸¸æˆçŠ¶æ€ç®¡ç†
        const gameState = {
            currentIndex: 0,
            score: 0,
            stars: 0,
            wrongAnswers: [],
            total: questions.length,
            get progress() {
                return ((this.currentIndex) / this.total * 100).toFixed(1)
            }
        };

        // DOMç¼“å­˜
        const dom = {
            questionArea: document.getElementById('questionArea'),
            score: document.getElementById('score'),
            total: document.getElementById('total'),
            starCount: document.getElementById('starCount'),
            progressBar: document.querySelector('.progress-bar'),
            nextBtn: document.getElementById('nextBtn')
        };

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            gameState.currentIndex = 0;
            gameState.score = 0;
            gameState.stars = 0;
            gameState.wrongAnswers = [];
            dom.total.textContent = questions.length;
            renderQuestion();
            updateUI();
        }

        // æ¸²æŸ“é¢˜ç›®
        function renderQuestion() {
            const q = questions[gameState.currentIndex];
            let html = `
                <div class="question-card">
                    <div class="q-type">${q.type.toUpperCase()}</div>
                    <h3>${q.question}</h3>`;

            if (q.type === 'choice') {
                html += `<div class="options">${q.options.map((opt, i) => `
                    <div class="option" data-key="${String.fromCharCode(65 + i)}">
                        ${String.fromCharCode(65 + i)}. ${opt}
                    </div>`).join('')}
                </div>`;
            } else if (q.type === 'fill') {
                html += `<input type="text" class="fill-input" placeholder="è¯·è¾“å…¥ç­”æ¡ˆ">`;
            } else if (q.type === 'qa') {
                html += `<textarea class="qa-input" placeholder="è¯·è¾“å…¥æ‚¨çš„å›ç­”"></textarea>`;
            }

            dom.questionArea.innerHTML = html;
            bindEvents();
            updateProgress();
        }

        // äº‹ä»¶ç»‘å®š
        function bindEvents() {
            dom.questionArea.addEventListener('click', handleChoice);
            const input = dom.questionArea.querySelector('.fill-input, .qa-input');
            if (input) input.addEventListener('blur', handleInput);
        }

        // å¤„ç†é€‰æ‹©é¢˜
        function handleChoice(e) {
            const option = e.target.closest('.option');
            if (option && !dom.questionArea.querySelector('.answer-feedback')) {
                handleAnswer(option.dataset.key);
            }
        }

        // å¤„ç†è¾“å…¥é¢˜
        function handleInput(e) {
            if (!dom.questionArea.querySelector('.answer-feedback')) {
                handleAnswer(e.target.value.trim());
            }
        }

        // å¤„ç†ç­”æ¡ˆ
        function handleAnswer(answer) {
            const q = questions[gameState.currentIndex];
            const isCorrect = checkAnswer(q, answer);
            
            showFeedback(q, answer, isCorrect);
            updateScore(isCorrect);
            recordWrongAnswer(q, answer, isCorrect);
            updateStars(isCorrect);
            dom.nextBtn.disabled = false;
        }

        // æ£€æŸ¥ç­”æ¡ˆæ­£ç¡®æ€§
        function checkAnswer(q, answer) {
            if (q.type === 'choice') return answer.toUpperCase() === q.answer;
            return answer === q.answer;
        }

        // æ˜¾ç¤ºåé¦ˆ
        function showFeedback(q, userAnswer, isCorrect) {
            let feedback = '';
            const correctAnswer = q.type === 'choice' ? `${q.answer}. ${q.options[q.answer.charCodeAt(0)-65]}` : q.answer;

            if (q.type === 'choice') {
                dom.questionArea.querySelectorAll('.option').forEach(opt => {
                    opt.classList.toggle('correct', opt.dataset.key === q.answer);
                    opt.classList.toggle('wrong', !isCorrect && opt.dataset.key === userAnswer);
                });
            }

            feedback += `<div class="answer-feedback">
                ${isCorrect ? 'âœ… æ­£ç¡®ï¼è·å¾—â­+1' : `âŒ é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆï¼š${correctAnswer}`}
                <div class="explanation">è§£æï¼š${q.ref}ï¼ˆ${q.page}ï¼‰</div>
            </div>`;

            dom.questionArea.insertAdjacentHTML('beforeend', feedback);
        }

        // æ›´æ–°åˆ†æ•°å’Œæ˜Ÿæ˜Ÿ
        function updateScore(isCorrect) {
            if (isCorrect) {
                gameState.score++;
                dom.score.textContent = gameState.score;
            }
        }

        function updateStars(isCorrect) {
            if (isCorrect) {
                gameState.stars++;
                dom.starCount.textContent = gameState.stars;
            }
        }

        // è®°å½•é”™é¢˜
        function recordWrongAnswer(q, userAnswer, isCorrect) {
            if (!isCorrect) {
                gameState.wrongAnswers.push({
                    question: q.question,
                    userAnswer: userAnswer,
                    correctAnswer: q.answer,
                    explanation: `${q.ref}ï¼ˆ${q.page}ï¼‰`
                });
            }
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            dom.progressBar.style.width = `${gameState.progress}%`;
        }

        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            if (gameState.currentIndex < questions.length - 1) {
                gameState.currentIndex++;
                renderQuestion();
                dom.nextBtn.disabled = true;
            } else {
                alert(`æ¸¸æˆç»“æŸï¼æœ€ç»ˆå¾—åˆ†ï¼š${gameState.score}/${questions.length}`);
            }
        }

        // æ˜¾ç¤ºç­”æ¡ˆ
        function showAnswer() {
            const q = questions[gameState.currentIndex];
            alert(`æ­£ç¡®ç­”æ¡ˆï¼š${q.answer}\nè§£æï¼š${q.ref}ï¼ˆ${q.page}ï¼‰`);
        }

        // æ˜¾ç¤ºé”™é¢˜æœ¬
        function showWrongBook() {
            const modal = document.createElement('div');
            modal.className = 'wrong-modal';
            modal.innerHTML = `
                <h3>é”™é¢˜æœ¬ï¼ˆ${gameState.wrongAnswers.length}é¢˜ï¼‰</h3>
                ${gameState.wrongAnswers.map((item, i) => `
                    <div class="wrong-item">
                        <div>é—®é¢˜ï¼š${item.question}</div>
                        <div>æ‚¨çš„ç­”æ¡ˆï¼š${item.userAnswer}</div>
                        <div>æ­£ç¡®ç­”æ¡ˆï¼š${item.correctAnswer}</div>
                        <div class="explanation">è§£æï¼š${item.explanation}</div>
                    </div>
                `).join('')}
                <button onclick="this.parentElement.remove()" style="margin-top:15px;width:100%">å…³é—­</button>
            `;
            document.body.appendChild(modal);
        }

        // é‡æ–°å¼€å§‹
        function restartGame() {
            if (confirm('ç¡®å®šè¦é‡æ–°å¼€å§‹å—ï¼Ÿå½“å‰è¿›åº¦å°†ä¸¢å¤±ï¼')) {
                initGame();
            }
        }

        // å¯åŠ¨æ¸¸æˆ
        initGame();
    </script>
</body>
</html>